"use strict";(self.webpackChunksailpoint_developer_portal=self.webpackChunksailpoint_developer_portal||[]).push([[58041],{73862:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var n=a(87462),i=(a(67294),a(3905));const s={id:"identity-context",title:"Identity Attribute Context in Transforms",pagination_label:"Identity Attribute Context",sidebar_label:"Identity Attribute Context",sidebar_class_name:"identityContextTransform",keywords:["transforms","guides","nested","lifecycle"],description:"Examples on how you might use the identity attribute context.",sidebar_position:5,slug:"/extensibility/transforms/guides/identity-context-examples",tags:["Transforms","Guides","identity"]},r=void 0,o={unversionedId:"extensibility/transforms/guides/identity-context",id:"extensibility/transforms/guides/identity-context",title:"Identity Attribute Context in Transforms",description:"Examples on how you might use the identity attribute context.",source:"@site/docs/extensibility/transforms/guides/identity-context.md",sourceDirName:"extensibility/transforms/guides",slug:"/extensibility/transforms/guides/identity-context-examples",permalink:"/docs/extensibility/transforms/guides/identity-context-examples",draft:!1,editUrl:"https://github.com/sailpoint-oss/developer-community-site/edit/main/docs/extensibility/transforms/guides/identity-context.md",tags:[{label:"Transforms",permalink:"/docs/tags/transforms"},{label:"Guides",permalink:"/docs/tags/guides"},{label:"identity",permalink:"/docs/tags/identity"}],version:"current",lastUpdatedBy:"darrell-thobe-sp",lastUpdatedAt:1709674012,formattedLastUpdatedAt:"Mar 5, 2024",sidebarPosition:5,frontMatter:{id:"identity-context",title:"Identity Attribute Context in Transforms",pagination_label:"Identity Attribute Context",sidebar_label:"Identity Attribute Context",sidebar_class_name:"identityContextTransform",keywords:["transforms","guides","nested","lifecycle"],description:"Examples on how you might use the identity attribute context.",sidebar_position:5,slug:"/extensibility/transforms/guides/identity-context-examples",tags:["Transforms","Guides","identity"]},sidebar:"openApiSidebar",previous:{title:"Lifecycle State Transform",permalink:"/docs/extensibility/transforms/guides/lifecycle-state-transform"},next:{title:"Operations",permalink:"/docs/extensibility/transforms/operations"}},l={},d=[{value:"Overview",id:"overview",level:2},{value:"Examples",id:"examples",level:2},{value:"Get the ID of the identity&#39;s manager",id:"get-the-id-of-the-identitys-manager",level:3},{value:"Get the custom attribute of the identity&#39;s manager",id:"get-the-custom-attribute-of-the-identitys-manager",level:3},{value:"Get manager status of the identity&#39;s manager",id:"get-manager-status-of-the-identitys-manager",level:3},{value:"Get an identity&#39;s accounts",id:"get-an-identitys-accounts",level:3},{value:"Get a comma separated list of account names from an application/source",id:"get-a-comma-separated-list-of-account-names-from-an-applicationsource",level:3},{value:"Notes",id:"notes",level:2}],u={toc:d},m="wrapper";function p(t){let{components:e,...a}=t;return(0,i.kt)(m,(0,n.Z)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"Transforms ship with the Apache Velocity template engine, which allows a transform to reference, transform, and render values passed into the transform context."),(0,i.kt)("p",null,"The following variables are available to the Apache Velocity template engine when a transform is used to source an identity attribute: "),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Variable"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"identity"),(0,i.kt)("td",{parentName:"tr",align:null},"sailpoint.object.Identity"),(0,i.kt)("td",{parentName:"tr",align:null},"This is the identity the attribute promotion is performed on.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"attributeDefinition"),(0,i.kt)("td",{parentName:"tr",align:null},"sailpoint.object.ObjectAttribute"),(0,i.kt)("td",{parentName:"tr",align:null},"This is the definition of the attribute being promoted.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"oldValue"),(0,i.kt)("td",{parentName:"tr",align:null},"Object"),(0,i.kt)("td",{parentName:"tr",align:null},"This is the attribute's previous value.")))),(0,i.kt)("p",null,"For available methods on these objects see our ",(0,i.kt)("a",{parentName:"p",href:"https://developer.sailpoint.com/docs/extensibility/rules/java-docs"},"Rules Java Docs"),"."),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("p",null,"These examples will help you learn what you can do with the identity context."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"You can use ",(0,i.kt)("inlineCode",{parentName:"p"},"$identity"),", as well as the other variables, in all transform operations.")),(0,i.kt)("h3",{id:"get-the-id-of-the-identitys-manager"},"Get the ID of the identity's manager"),(0,i.kt)("p",null,"You must use a ",(0,i.kt)("inlineCode",{parentName:"p"},"firstValid"),". If the identity does not have a manager, ",(0,i.kt)("inlineCode",{parentName:"p"},"getManager()")," returns null."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "firstValid",\n  "attributes": {\n    "values": ["$identity.getManager().getId()", "no manager exists"]\n  }\n}\n')),(0,i.kt)("h3",{id:"get-the-custom-attribute-of-the-identitys-manager"},"Get the custom attribute of the identity's manager"),(0,i.kt)("p",null,"You must use a ",(0,i.kt)("inlineCode",{parentName:"p"},"firstValid"),". If the identity does not have a manager, ",(0,i.kt)("inlineCode",{parentName:"p"},"getManager()")," returns null."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "firstValid",\n  "attributes": {\n    "values": ["$identity.getManager().getStringAttribute(\'country\')", "no manager exists"]\n  }\n}\n')),(0,i.kt)("h3",{id:"get-manager-status-of-the-identitys-manager"},"Get manager status of the identity's manager"),(0,i.kt)("p",null,"This example would get the status of whether or not the identity's manager is currently actually a manager. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "static",\n  "attributes": {\n    "value": "$identity.getManagerStatus()"\n  }\n}\n')),(0,i.kt)("h3",{id:"get-an-identitys-accounts"},"Get an identity's accounts"),(0,i.kt)("p",null,"This example would get an identity's various associated source accounts. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "static",\n  "attributes": {\n    "value": "$identity.getLinks()"\n  }\n}\n')),(0,i.kt)("h3",{id:"get-a-comma-separated-list-of-account-names-from-an-applicationsource"},"Get a comma separated list of account names from an application/source"),(0,i.kt)("p",null,"This is the velocity logic of the transform: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'/* Loop through accounts returned from get accounts by application id */\n#foreach($account in $identity.getLinksByAppIdOrName("2c918088814e6a610181686b56977fa8",null))\n    #if($foreach.index + 1 != $identity.getLinks().size()) /* If we are not on the last item, include a comma */\n        $account.getNativeIdentity(),\n    #else\n        $account.getNativeIdentity()\n    #end\n#end\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "static",\n  "attributes": {\n    "value": "#foreach($account in $identity.getLinksByAppIdOrName(\\"2c918088814e6a610181686b56977fa8\\",null))#if($foreach.index + 1 != $identity.getLinks().size())$account.getNativeIdentity(),#else$account.getNativeIdentity()#end#end"\n  }\n}\n')),(0,i.kt)("h2",{id:"notes"},"Notes"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"If you assign a variable with the identity attribute context, doing so will cast the type to a string.")),(0,i.kt)("p",null,"For example, you may do this if you wanted to assign the identity's manager object to a variable and then get additional data from it."),(0,i.kt)("admonition",{title:"Invalid",type:"warning"},(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "static",\n  "attributes": {\n    "manager": "$identity.getManager()",\n    "value": "$manager.getStringAttribute(\'country\')"\n  }\n}\n'))),(0,i.kt)("admonition",{title:"Valid",type:"tip"},(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "static",\n  "attributes": {\n    "managerCountry": "$identity.getManager().getStringAttribute(\'country\')",\n    "value": "$managerCountry"\n  }\n}\n'))))}p.isMDXComponent=!0}}]);